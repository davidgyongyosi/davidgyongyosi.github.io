---
// ProjectCard.astro
import Button from "./Button.astro";

export interface Props {
  title: string;
  description: string;
  link: string;
  linkText: string;
  tags: string[];
  year?: string;
  status?: 'completed' | 'in-progress' | 'ongoing';
  role?: string;
  highlights?: string[];
}

const { title, description, link, linkText, tags, year, status } = Astro.props;

// Get status icon
const getStatusIcon = (status: string): string => {
  switch (status) {
    case 'completed': return '✓';
    case 'in-progress': return '⟳';
    case 'ongoing': return '◉';
    default: return '';
  }
};

---

<article class="project-card">
  <div class="card-content">
    <!-- Simplified header with title and status -->
    <header class="card-header">
      <div class="header-top">
        <h3 class="card-title">{title}</h3>
        {status && (
          <span class={`status-indicator status-${status}`} title={status}>
            {getStatusIcon(status)}
          </span>
        )}
      </div>
      {year && <span class="year-badge">{year}</span>}
    </header>

    <!-- Tech stack as primary visual element -->
    <div class="tech-stack">
      {tags.slice(0, 6).map((tag) => (
        <span class="tech-tag">
          <span class="tag-content">{tag}</span>
        </span>
      ))}
      {tags.length > 6 && (
        <span class="tech-tag more-tags">
          <span class="tag-content">+{tags.length - 6}</span>
        </span>
      )}
    </div>

    <!-- Concise description -->
    <p class="card-description">{description}</p>

    <!-- Single CTA link -->
    <footer class="card-footer">
      <Button
        href={link}
        variant="secondary"
        target="_blank"
        rel="noreferrer noopener"
        icon="fa-arrow-up-right-from-square"
      >
        {linkText}()
      </Button>
    </footer>
  </div>
</article>
