---
import MainLayout from "../layouts/MainLayout.astro";
import SectionHeader from "../components/SectionHeader.astro";
import ProjectCard from "../components/ProjectCard.astro";
import { getProjectsByCategory } from "../data/projects";

// Get projects by category
const largeProjects = getProjectsByCategory('large');
const smallProjects = getProjectsByCategory('small');
const inProgressProjects = getProjectsByCategory('in-progress');
---

<MainLayout title="Works">
  <section class="page-section">
    <h1 class="page-title">
      <span class="heading-prefix">/</span>projects
    </h1>

    {largeProjects.length > 0 && (
      <div class="projects-category">
        <SectionHeader title="large-projects" showLine={true} />
        <div class="projects-grid">
          {largeProjects.map((project) => (
            <ProjectCard {...project} />
          ))}
        </div>
      </div>
    )}

    {smallProjects.length > 0 && (
      <div class="projects-category">
        <SectionHeader title="small-projects" showLine={true} />
        <div class="projects-grid">
          {smallProjects.map((project) => (
            <ProjectCard {...project} />
          ))}
        </div>
      </div>
    )}

    {inProgressProjects.length > 0 && (
      <div class="projects-category">
        <SectionHeader title="in-progress" showLine={true} />
        <div class="projects-grid">
          {inProgressProjects.map((project) => (
            <ProjectCard {...project} />
          ))}
        </div>
      </div>
    )}
  </section>
</MainLayout>
